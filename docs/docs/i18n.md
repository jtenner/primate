# I18N

Internationalization (i18n) localizes your app.

Primate provides adapters that expose a `t` translator and a `locale` setter.
The active locale persists across reloads.

## Setup

[s=i18n/setup]

Enable the module in `config/app.ts`.

[s=i18n/config]

## Locales

Locales are JSON files in the `locales` directory.

| File         | Purpose                                   |
| ------------ | ----------------------------------------- |
| `en-US.json` | default (can be `{}` if keys are English) |
| `<tag>.json` | maps keys to translations                 |

!!!
Filenames follow BCP-47 (e.g., `en-US`, `de-DE`). One file per locale. If
missing, the key is returned. Keep keys stable (e.g., `"All posts"`) â€”
if you refactor, update all locale files.
!!!

### Example

[s=i18n/locales]

!!!
If your keys are English, you can also keep `en-US.json` empty (`{}`) and let
it fall back.
!!!

## Usage

Each frontend adapter provides:

| Frontend | Translator   | Locale setter |
| -------- | ------------ | ------------- |
| React    | `t`          | `locale.set`  |
| Svelte   | `$t`         | `locale.set`  |
| Solid    | `t`          | `locale.set`  |

### Component

[s=i18n/usage]

## Lifecycle

| # | Behavior                                                           |
| - | ------------------------------------------------------------------ |
| 1 | Locales load from `locales` at startup                             |
| 2 | On request, i18n applies when locales are configured               |
| 3 | If a cookie (`@primate/i18n`) exists, that locale is used          |
| 4 | Otherwise, the first matching `Accept-Language` header is selected |
| 5 | If no match is found, the default `en-US` locale is used           |
| 6 | `locale.set("xx-XX")` switches locale, sets a cookie               |
