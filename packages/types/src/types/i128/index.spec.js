import i128 from "./i128.js";
import { reassert, ifail } from "./common.spec.js";

export default test => {
  reassert(test, i128);

  test.case("fail", ({ fail }) => {
    ifail(fail);
  });
  test.case("match", ({ match }) => {
    match("1.0", 1n);
    match(1.0, 1n);
    match(0, 0n);
    match(-0, 0n);
    match(1, 1n);
    match(-1, -1n);
    match("1", 1n);
    match("-1", -1n);
  });
  test.case("range", ({ same, match, fail }) => {
    same(0n, -0n, 1n, 1n);
    same(-170_141_183_460_469_231_731_687_303_715_884_105_728n);
    same(170_141_183_460_469_231_731_687_303_715_884_105_727n);
    match("-170141183460469231731687303715884105728",
      -170_141_183_460_469_231_731_687_303_715_884_105_728n);
    match("170141183460469231731687303715884105727",
      170_141_183_460_469_231_731_687_303_715_884_105_727n);
    fail(-170_141_183_460_469_231_731_687_303_715_884_105_729n);
    fail(170_141_183_460_469_231_731_687_303_715_884_105_728n);
    fail("-170141183460469231731687303715884105729");
    fail("170141183460469231731687303715884105728");
  });
};
